FILE
  MvModuleImpl(MODULE)
    PsiElement(module)('module')
    PsiWhiteSpace(' ')
    MvAddressRefImpl(ADDRESS_REF)
      PsiElement(DIEM_ADDRESS)('0x1')
    PsiElement(::)('::')
    PsiElement(IDENTIFIER)('spec_block_with_lambdas')
    PsiWhiteSpace(' ')
    PsiElement({)('{')
    PsiWhiteSpace('\n    ')
    MvFunctionImpl(FUNCTION)
      PsiElement(fun)('fun')
      PsiWhiteSpace(' ')
      PsiElement(IDENTIFIER)('apply_with_no_abort')
      MvFunctionParameterListImpl(FUNCTION_PARAMETER_LIST)
        PsiElement(()('(')
        MvFunctionParameterImpl(FUNCTION_PARAMETER)
          MvPatBindingImpl(PAT_BINDING)
            PsiElement(IDENTIFIER)('f')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          MvLambdaTypeImpl(LAMBDA_TYPE)
            PsiElement(|)('|')
            MvLambdaTypeParamImpl(LAMBDA_TYPE_PARAM)
              MvPathTypeImpl(PATH_TYPE)
                MvPathImpl(PATH)
                  PsiElement(IDENTIFIER)('u64')
            PsiElement(|)('|')
            PsiWhiteSpace(' ')
            MvPathTypeImpl(PATH_TYPE)
              MvPathImpl(PATH)
                PsiElement(IDENTIFIER)('u64')
        PsiElement(,)(',')
        PsiWhiteSpace(' ')
        MvFunctionParameterImpl(FUNCTION_PARAMETER)
          MvPatBindingImpl(PAT_BINDING)
            PsiElement(IDENTIFIER)('x')
          PsiElement(:)(':')
          PsiWhiteSpace(' ')
          MvPathTypeImpl(PATH_TYPE)
            MvPathImpl(PATH)
              PsiElement(IDENTIFIER)('u64')
        PsiElement())(')')
      MvReturnTypeImpl(RETURN_TYPE)
        PsiElement(:)(':')
        PsiWhiteSpace(' ')
        MvPathTypeImpl(PATH_TYPE)
          MvPathImpl(PATH)
            PsiElement(IDENTIFIER)('u64')
      PsiWhiteSpace(' ')
      MvCodeBlockImpl(CODE_BLOCK)
        PsiElement({)('{')
        PsiWhiteSpace('\n        ')
        MvCallExprImpl(CALL_EXPR)
          MvPathExprImpl(PATH_EXPR)
            MvPathImpl(PATH)
              PsiElement(IDENTIFIER)('f')
          MvValueArgumentListImpl(VALUE_ARGUMENT_LIST)
            PsiElement(()('(')
            MvValueArgumentImpl(VALUE_ARGUMENT)
              MvPathExprImpl(PATH_EXPR)
                MvPathImpl(PATH)
                  PsiElement(IDENTIFIER)('x')
            PsiElement())(')')
        PsiWhiteSpace('\n    ')
        PsiElement(})('}')
    PsiWhiteSpace('\n\n    ')
    MvFunctionImpl(FUNCTION)
      PsiElement(fun)('fun')
      PsiWhiteSpace(' ')
      PsiElement(IDENTIFIER)('test_no_abort')
      MvFunctionParameterListImpl(FUNCTION_PARAMETER_LIST)
        PsiElement(()('(')
        PsiElement())(')')
      MvReturnTypeImpl(RETURN_TYPE)
        PsiElement(:)(':')
        PsiWhiteSpace(' ')
        MvPathTypeImpl(PATH_TYPE)
          MvPathImpl(PATH)
            PsiElement(IDENTIFIER)('u64')
      PsiWhiteSpace(' ')
      MvCodeBlockImpl(CODE_BLOCK)
        PsiElement({)('{')
        PsiWhiteSpace('\n        ')
        MvCallExprImpl(CALL_EXPR)
          MvPathExprImpl(PATH_EXPR)
            MvPathImpl(PATH)
              PsiElement(IDENTIFIER)('apply_with_no_abort')
          MvValueArgumentListImpl(VALUE_ARGUMENT_LIST)
            PsiElement(()('(')
            PsiWhiteSpace('\n            ')
            MvValueArgumentImpl(VALUE_ARGUMENT)
              MvLambdaExprImpl(LAMBDA_EXPR)
                MvLambdaParameterListImpl(LAMBDA_PARAMETER_LIST)
                  PsiElement(|)('|')
                  MvLambdaParameterImpl(LAMBDA_PARAMETER)
                    MvPatBindingImpl(PAT_BINDING)
                      PsiElement(IDENTIFIER)('x')
                  PsiElement(|)('|')
                PsiWhiteSpace(' ')
                MvBinaryExprImpl(BINARY_EXPR[+])
                  MvPathExprImpl(PATH_EXPR)
                    MvPathImpl(PATH)
                      PsiElement(IDENTIFIER)('x')
                  PsiWhiteSpace(' ')
                  MvBinaryOpImpl(BINARY_OP)
                    PsiElement(+)('+')
                  PsiWhiteSpace(' ')
                  MvLitExprImpl(LIT_EXPR)
                    PsiElement(INTEGER_LITERAL)('1')
                PsiWhiteSpace(' ')
                MvSpecBlockExprImpl(SPEC_BLOCK_EXPR)
                  PsiElement(spec)('spec')
                  PsiWhiteSpace(' ')
                  MvSpecCodeBlockImpl(SPEC_CODE_BLOCK)
                    PsiElement({)('{')
                    PsiWhiteSpace(' ')
                    MvSpecExprStmtImpl(SPEC_EXPR_STMT)
                      MvAbortsIfSpecExprImpl(ABORTS_IF_SPEC_EXPR)
                        PsiElement(aborts_if_kw)('aborts_if')
                        PsiWhiteSpace(' ')
                        MvBinaryExprImpl(BINARY_EXPR[==])
                          MvPathExprImpl(PATH_EXPR)
                            MvPathImpl(PATH)
                              PsiElement(IDENTIFIER)('x')
                          PsiWhiteSpace(' ')
                          MvBinaryOpImpl(BINARY_OP)
                            PsiElement(==)('==')
                          PsiWhiteSpace(' ')
                          MvPathExprImpl(PATH_EXPR)
                            MvPathImpl(PATH)
                              PsiElement(IDENTIFIER)('MAX_U64')
                      PsiElement(;)(';')
                    PsiWhiteSpace(' ')
                    MvSpecExprStmtImpl(SPEC_EXPR_STMT)
                      MvEnsuresSpecExprImpl(ENSURES_SPEC_EXPR)
                        PsiElement(ensures_kw)('ensures')
                        PsiWhiteSpace(' ')
                        MvBinaryExprImpl(BINARY_EXPR[==])
                          MvPathExprImpl(PATH_EXPR)
                            MvPathImpl(PATH)
                              PsiElement(IDENTIFIER)('result')
                          PsiWhiteSpace(' ')
                          MvBinaryOpImpl(BINARY_OP)
                            PsiElement(==)('==')
                          PsiWhiteSpace(' ')
                          MvBinaryExprImpl(BINARY_EXPR[+])
                            MvPathExprImpl(PATH_EXPR)
                              MvPathImpl(PATH)
                                PsiElement(IDENTIFIER)('x')
                            PsiWhiteSpace(' ')
                            MvBinaryOpImpl(BINARY_OP)
                              PsiElement(+)('+')
                            PsiWhiteSpace(' ')
                            MvLitExprImpl(LIT_EXPR)
                              PsiElement(INTEGER_LITERAL)('1')
                      PsiElement(;)(';')
                    PsiWhiteSpace(' ')
                    PsiElement(})('}')
            PsiElement(,)(',')
            PsiWhiteSpace('\n            ')
            MvValueArgumentImpl(VALUE_ARGUMENT)
              MvLitExprImpl(LIT_EXPR)
                PsiElement(INTEGER_LITERAL)('5')
            PsiWhiteSpace('  ')
            PsiComment(EOL_COMMENT)('// 5 != MAX_U64, so !aborts_if is satisfied')
            PsiWhiteSpace('\n        ')
            PsiElement())(')')
        PsiWhiteSpace('\n    ')
        PsiElement(})('}')
    PsiWhiteSpace('\n')
    PsiElement(})('}')